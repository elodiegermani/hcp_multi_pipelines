#!/bin/bash

output_file=$PATHLOG/$OAR_JOB_ID.txt

# Parameters
expe_name="pipeline_transition"
main_script=/srv/tempdd/egermani/hcp_pipelines/results/error_rate_computation.py

echo "Create dir for log"
CURRENTDATE=`date +"%Y-%m-%d"`
echo "currentDate :"
echo $CURRENTDATE
PATHLOG="/srv/tempdd/egermani/Logs/${CURRENTDATE}_OARID_${OAR_JOB_ID}"

output_file=$PATHLOG/$OAR_JOB_ID.txt

for fwhm in 5 8
do 
	for param in 0 6 24
	do 
		for hrf in 0 1
		do
			dataset_A_name="DATASET_SOFT_SPM_FWHM_${fwhm}_MC_PARAM_${param}_HRF_${hrf}"
			dataset_B_name="DATASET_SOFT_FSL_FWHM_${fwhm}_MC_PARAM_${param}_HRF_${hrf}"

			exp_dir_group1=/srv/tempdd/egermani/hcp_pipelines/data/derived/subject_level/"$dataset_A_name"
			exp_dir_group2=/srv/tempdd/egermani/hcp_pipelines/data/derived/subject_level/"$dataset_B_name"

			r=/srv/tempdd/egermani/hcp_pipelines/figures/ER_"$dataset_A_name"_VS_"$dataset_B_name"
			S='["100307","101309","101410","101915","102513","102614","103818","104012","104416","106016","106521","107220","108323","108525","108828","109123","109325","109830","110007","110411","110613","111009","111211","111312","111413","111514","111716","112112","112920","113215","113316","113417","113619","113821","114116","114217","114318","114419","114621","114823","114924","115017","115219","115320","115825","116221","116423","116524","116726","117021","117122","117324","117930","118023","118124","118225","118528","118730","118932","119025","123925","124422","125525","126325","126426","127630","127731","129129","129331","129634","130619","130821","131419","133625","133827","133928","134021","134223","134324","134425","134627","134728","134829","135124","135225","135528","135629","135730","135932","136732","136833","137027","137128","137229","137431","137633","137936","138130","138231","138332","138534","138837","139233","139435","139637","140117","140319","140824","140925","141119","141422","141826","142424","143224","143325","143426","143830","144125","144226","144731","144832","149741","149842","150019","150423","150524","150625","150726","150928","151021","151223","151526","151627","151728","151829","151930","152225","152427","152831","153025","153126","153227","153429","153631","153732","153833","153934","154229","154330","154431","154532","154734","154835","154936","155635","156233","156334","163836","164030","164131","164636","164939","165032","165234","165436","165638","165840","165941","166438","166640","167036","167238","167440","167743","168139","168240","168341","168745","168947","169040","169141","169343","169444","169545","169747","169949","170631","170934","171128","171330","171431","171532","171633","171734","172029","172130","172332","172433","172534","172635","172938","173132","173233","173334","173435","173536","173637","173738","173839","173940","174437","174841","175035","175136","175237","175338","175439","175540","175742","176037","176239","176441","176542","176845","177140","177241","177342","177645","177746","178243","178647","178748","178849","178950","179245","179346","179548","179952","180129","180432","180533","180735","180836","180937","181131","181636","182032","182436","182739","182840","183034","183337","183741","185341","185846","186040","186444","186848","186949","187143","187547","188347","189349","189652","190031","191437","192035","192237","192540","192641","193239","193845","194140","194443","194645","194746","194847","195041","195445","195647","196144","196346","196750","196851","196952","197348","197550","198047","198249","198350","198451","198653","198855","199150","199251","199352","199453","199655","199958","200008","200109","200210","200311","200614","201414","201515","209935","210011","210112","210415","210617","211114","211215","211316","211417","211619","211720","211821","211922","212015","212116","212217","212318","212419","212823","213017","213421","213522","214019","214221","214423","214524","214726","217126","217429","219231","220721","221218","221319","223929","224022","227432","227533","228434","231928","233326","236130","237334","238033","239136","239944","245333","246133","248238","248339","249947","615441","620434","622236","623137","627852","628248","645551","647858","654350","662551","664757","668361","679568","679770","680250","680452","680957","683256","685058","686969","687163","688569","690152","692964","693461","693764","694362","695768","702133","704238","705341","706040","707749","709551","715041","715647","715950","720337","723141","724446","725751","727553","727654","728454","729557","731140","732243","734045","734247","735148","737960","742549","748258","748662","749058","749361","751348","751550","753251","756055","792867","793465","800941","802844","803240","804646","809252","810439","810843","812746","815247","816653","818455","818859","820745","822244","825048","825553","825654","826353","826454","827052","828862","832651","833148","833249","835657","837560","837964","841349","843151","844961","845458","849971","856766","856968","901139","901442","902242","904044","905147","907656","908860","910241","910443","911849","912447","917255","917558","919966","922854","923755","926862","927359","929464","930449","932554","933253","937160","942658","943862","947668","951457","952863","953764","955465","957974","958976","959574","962058","965367","965771","966975","969476","970764","971160","972566","973770","978578","979984","983773","984472","987074","987983","989987","990366","991267","992673","992774","993675","994273","995174","996782"]'
			c='["rh"]'
			i=100

			source /opt/miniconda-latest/etc/profile.d/conda.sh
			source /opt/miniconda-latest/bin/activate
			conda activate neuro

			python3 $main_script --exp_dir_group1 $exp_dir_group1 --exp_dir_group2 $exp_dir_group2 -r $r -S $S -c $c --n_iter $i
done 
done
done
